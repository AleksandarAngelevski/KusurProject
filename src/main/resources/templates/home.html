<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <title>Home</title>
    <!-- -->
    <link rel="stylesheet" type="text/css" th:href="@{/style/home.css}" href="../static/style/home.css" >
</head>
<body>

<nav>
    
    <a th:href="@{~/account}" id="account">Account</a>
<div class="add-friend">
    
    <!--    <form action="#" th:action="@{/add-friend}" th:object="${friend_request}" method="post"><input type="text" name="nickname"><input type="submit"></form>-->
        <input id="add-friend-field" type="text" placeholder="Username...">
        <button id="add-friend-btn">Add friend</button>
</div>

<form th:action="@{/logout}" method="post">
    <input type="submit" id="sign-out-btn" value="Sign Out"/>
</form>
</nav>  
<div class="container">
    <div class="left">
        <div class="friends-container">
            <h3>Friends:</h3>
            <ul >
                <li th:each="friend : ${friends}" ><a th:href="@{'~/friends/' +${friend.username}}" th:text="${friend.username}"></a></li>
            </ul>
        </div>
        <div class="addExpense-container">
            <button id="add-expense-btn">Add Expense</button>
        </div>
    </div>
    <div class="middle">
        <div class="settleExpenses-container">
            <button id="settle-expense-btn">Settle Expense</button>
        </div>
        <h1 th:inline="text">Hello <span th:remove="tag" sec:authentication="name">thymeleaf</span>!</h1>
        <div class="net-balances-container">
            <ul>
                <li th:each="balance : ${userBalances}" th:text="${balance.message}" th:data-debtor="${balance.debtor.username}" th:data-debtee="${balance.debtee.username}"></li>
            </ul>
        </div>
        
        <div class="expenses-container">
            <div class="expense" th:each="expense : ${expenses}">
                <h1 th:text="${expense.description}"></h1>
                <h2 th:text="'Total: ' +${expense.amount}+ 'MKD'"></h2>
                <ul>
                <li th:text="'Created by:'+${expense.creator}"></li>
            </ul></div>
        </div>
        <div class="groups-container">
            <div class="wrapper"><h3>Groups:</h3><button id="create-group-btn"><span id="plus-wrapper"><span id="one"></span><span id="two"></span></span> Create Group</button></div>
            <div class="groups-container-wrapper">
              <a th:href="@{'~/groups/'+ ${group.first.id}}" th:each="group : ${groups}">
                <div class="group-wrapper">
                    <h3 th:text="${group.first.name}"></h3>
                    <span th:text="${group.second + 'MKD'}" th:classappend="${ group.second > 0 ? 'positive' : (group.second < 0 ? 'negative' : 'neutral')}"></span>
                </div>
            </a>
            </div>
            <!-- <ul>
                <li th:each="group : ${groups}"><a th:text="${group.name}" th:href="@{'~/groups/'+ ${group.id}}"></a></li>
            </ul> -->
        </div>
    </div>
    
</div>

    <div id="overlay"></div>
    <div class="settle-expense-modal">
        <span id="close-btn-modal">Close</span>
        <div class="settle-expense-modal-wrapper">
            
        </div>
        
    </div>
    <div class="add-expense-modal" style="display: none;">
        <div class="wrapper">
            <div class="row1">
                <input type="text" name="" id="sum" placeholder="Sum..." style="width: 50%;"><button style="width: 50%;">Add expense</button>
            </div>
            <div class="row2">
                <input type="text" name="" id="description" placeholder="Description..." style="width: 100%;">
            </div>
        </div>
        <div class="choices">
            <!-- <h3>People:</h3> -->
            <!-- <div class="choice"><div class="person"></div></div>
            <div class="choice"><div class="person"></div></div>
            <div class="choice"><div class="person"></div></div>
            <div class="choice"><div class="person"></div></div> -->
        </div>
        <span class="close-expense-modal-btn close-modal-btn">Close</span>
    </div>
    <div class="create-group-modal">

        <div class="wrappper">
            <input type="text" placeholder="Name...">
        <ul>
            
        </ul>
        </div>
        <button id="create-group-btn-modal">Create group</button>
        <span class="close-friends-modal-btn close-modal-btn">Close</span>
    </div>

    <span style="display:none;" sec:authentication="name" id="usernameeee">thymeleaf</span>
<!-- <script  th:src="@{/script/expenseModlue.js}" type="module" src="../static/script/expenseModlue.js"></script> -->
<script th:src="@{/script/home.js}" type="module" src="../static/script/home.js"></script>
<script  th:src="@{/script/settleExpenseModule.js}" type="module" src="../static/script/settleExpenseModule.js"></script>
<script  th:src="@{/script/loadingSpinnerModule.js}" type="module" src="../static/script/loadingSpinnerModule.js"></script>
</body>
</html>